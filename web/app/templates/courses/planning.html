{% extends 'base.html' %}
{% block title %}Mon planning{% endblock %}
{% block content %}

<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: var(--spacing-lg); gap: var(--spacing-md);">
  <div>
    <h1 style="margin-bottom: 4px;">Planning hebdomadaire</h1>
    <div style="opacity:.8; font-size: var(--font-size-sm);">Cours + activités personnelles</div>
  </div>

  <a href="{{ url_for('courses.new_activity') }}" class="btn">
    + Ajouter une activité
  </a>
</div>

<div class="card">
  <table style="width:100%; border-collapse:collapse;">
    <tr style="background: rgba(255,255,255,0.05);">
      <th style="padding:10px;">Jour</th>
      <th style="padding:10px;">Cours / Activités</th>
    </tr>

    {% for day in days %}
      <tr style="border-bottom:1px solid rgba(255,255,255,0.1);">
        <td style="padding:10px; font-weight:600; width: 140px;">{{ day }}</td>
        <td style="padding:10px;">
          {% if schedule[day] %}
            {% for item in schedule[day] %}
              <div style="background: var(--gradient-accent); padding:8px; margin:6px 0; border-radius:6px;">
                {% if item.kind == "course" %}
                  <strong>{{ item.code }}</strong> - {{ item.title }}<br>
                  <span style="font-size:0.9rem;">{{ item.start }} - {{ item.end }}</span>
                  <div style="margin-top:6px;">
                    <a href="{{ url_for('courses.course_detail', course_id=item.id) }}"
                       style="color: rgba(255,255,255,0.95); text-decoration: underline;">
                      Détails
                    </a>
                  </div>
                {% else %}
                  <strong>Activité</strong> - {{ item.title }}<br>
                  <span style="font-size:0.9rem;">{{ item.start }} - {{ item.end }}</span>
                {% endif %}
              </div>
            {% endfor %}
          {% else %}
            <span style="color:#888;">Aucun élément</span>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </table>
</div>

<div style="margin-top:20px;">
  <a href="{{ url_for('courses.my_courses') }}" style="color:var(--color-accent);">Retour</a>
</div>

{% endblock %}
